(function(){'use strict';var launchers=document.querySelectorAll('[data-experience-id]');if(!launchers.length)return;launchers.forEach(function(el){var expId=el.dataset.experienceId;if(!expId)return;var btn=el.querySelector('[data-editmuse-quiz-trigger]');if(!btn)return;btn.addEventListener('click',function(){var shop=window.Shopify?.shop||document.querySelector('meta[property="og:url"]')?.content?.match(/https?:\/\/([^.]+\.myshopify\.com)/)?.[1];if(!shop){alert('Unable to detect shop');return;}var formData=new FormData();formData.append('experienceId',expId);var url='/apps/editmuse/session/start';fetch(url,{method:'POST',body:formData}).then(function(r){return r.json();}).then(function(data){if(data.sessionId){window.location.href='/pages/editmuse-results?sid='+encodeURIComponent(data.sessionId);}else{alert('Failed to start session: '+(data.error||'Unknown error'));}}).catch(function(e){console.error('Error:',e);alert('Failed to start session');});});});})();
