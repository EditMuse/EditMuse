(function(){'use strict';var blocks=document.querySelectorAll('[data-editmuse-root]');if(!blocks.length)return;blocks.forEach(function(root){var blockId=root.dataset.editmuseRoot;var modal=root.querySelector('#editmuse-concierge-modal-'+blockId);var trigger=root.querySelector('[data-editmuse-concierge-trigger]');if(!modal||!trigger)return;var accentColor=root.dataset.accentColor||'#1a1a1a';var style=document.createElement('style');style.textContent='.editmuse-concierge-progress-bar[data-block="'+blockId+'"]{background-color:'+accentColor+';}.editmuse-concierge-submit[data-block="'+blockId+'"]{background-color:'+accentColor+';border-color:'+accentColor+';}.editmuse-concierge-submit[data-block="'+blockId+'"]:hover{background-color:'+accentColor+'dd;border-color:'+accentColor+'dd;}.editmuse-concierge-radio-label input[type="radio"]:checked+span[data-block="'+blockId+'"]{color:'+accentColor+';}';document.head.appendChild(style);var closeBtn=modal.querySelector('.editmuse-concierge-modal-close');var steps=modal.querySelectorAll('.editmuse-concierge-step');var progressBar=modal.querySelector('[data-progress-bar]');var backBtn=modal.querySelector('.editmuse-concierge-back');var nextBtn=modal.querySelector('.editmuse-concierge-next');var submitBtn=modal.querySelector('.editmuse-concierge-submit');if(!closeBtn||!steps.length||!progressBar||!backBtn||!nextBtn||!submitBtn)return;var currentStep=0;var quizSteps=3;function showStep(stepIndex){steps.forEach(function(step,index){step.style.display=index===stepIndex?'block':'none';});if(stepIndex<quizSteps){var progress=((stepIndex+1)/quizSteps)*100;progressBar.style.width=progress+'%';}else{progressBar.style.width='100%';}backBtn.style.display=stepIndex>0&&stepIndex<quizSteps?'inline-block':'none';if(stepIndex===quizSteps-1){nextBtn.style.display='none';submitBtn.style.display='inline-block';}else if(stepIndex>=quizSteps){nextBtn.style.display='none';submitBtn.style.display='none';}else{nextBtn.style.display='inline-block';submitBtn.style.display='none';}}function validateStep(stepIndex){var step=steps[stepIndex];if(!step)return false;var radio=step.querySelector('input[type="radio"]:checked');return radio!==null;}trigger.addEventListener('click',function(){modal.style.display='flex';document.body.style.overflow='hidden';currentStep=0;showStep(0);});closeBtn.addEventListener('click',function(){modal.style.display='none';document.body.style.overflow='';});var overlay=modal.querySelector('.editmuse-concierge-modal-overlay');if(overlay){overlay.addEventListener('click',function(){modal.style.display='none';document.body.style.overflow='';});}backBtn.addEventListener('click',function(){if(currentStep>0){currentStep--;showStep(currentStep);}});nextBtn.addEventListener('click',function(){if(validateStep(currentStep)){if(currentStep<quizSteps-1){currentStep++;showStep(currentStep);}}else{alert('Please select an option to continue');}});submitBtn.addEventListener('click',function(){if(validateStep(currentStep)){currentStep=quizSteps;showStep(currentStep);}});document.addEventListener('keydown',function(e){if(e.key==='Escape'&&modal.style.display==='flex'){modal.style.display='none';document.body.style.overflow='';}});});})();

