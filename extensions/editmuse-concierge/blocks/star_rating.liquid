<div data-editmuse-root="{{ block.id }}" data-accent-color="{{ block.settings.accent_color | default: '#1a1a1a' }}">
  <div class="editmuse-concierge-block">
    <button type="button" class="editmuse-concierge-button" data-editmuse-concierge-trigger>
      {{ block.settings.button_label }}
    </button>
  </div>

  <div class="editmuse-concierge-modal" id="editmuse-concierge-modal-{{ block.id }}" style="display: none;">
    <div class="editmuse-concierge-modal-overlay"></div>
    <div class="editmuse-concierge-modal-content">
      <button class="editmuse-concierge-modal-close" aria-label="Close">&times;</button>
      
      <div class="editmuse-concierge-progress">
        <div class="editmuse-concierge-progress-bar" data-progress-bar data-block="{{ block.id }}"></div>
      </div>
      
      <div class="editmuse-concierge-steps">
        <!-- Step 1: Occasion -->
        <div class="editmuse-concierge-step" data-step="0">
          <h2 class="editmuse-concierge-step-title">What's the occasion?</h2>
          <div class="editmuse-concierge-options">
            <label class="editmuse-concierge-radio-label">
              <input type="radio" name="occasion-{{ block.id }}" value="work" required>
              <span data-block="{{ block.id }}">Work</span>
            </label>
            <label class="editmuse-concierge-radio-label">
              <input type="radio" name="occasion-{{ block.id }}" value="casual" required>
              <span data-block="{{ block.id }}">Casual</span>
            </label>
            <label class="editmuse-concierge-radio-label">
              <input type="radio" name="occasion-{{ block.id }}" value="formal" required>
              <span data-block="{{ block.id }}">Formal Event</span>
            </label>
            <label class="editmuse-concierge-radio-label">
              <input type="radio" name="occasion-{{ block.id }}" value="date" required>
              <span data-block="{{ block.id }}">Date Night</span>
            </label>
          </div>
        </div>
        
        <!-- Step 2: Style -->
        <div class="editmuse-concierge-step" data-step="1" style="display: none;">
          <h2 class="editmuse-concierge-step-title">What's your style?</h2>
          <div class="editmuse-concierge-options">
            <label class="editmuse-concierge-radio-label">
              <input type="radio" name="style-{{ block.id }}" value="minimalist" required>
              <span data-block="{{ block.id }}">Minimalist</span>
            </label>
            <label class="editmuse-concierge-radio-label">
              <input type="radio" name="style-{{ block.id }}" value="classic" required>
              <span data-block="{{ block.id }}">Classic</span>
            </label>
            <label class="editmuse-concierge-radio-label">
              <input type="radio" name="style-{{ block.id }}" value="trendy" required>
              <span data-block="{{ block.id }}">Trendy</span>
            </label>
            <label class="editmuse-concierge-radio-label">
              <input type="radio" name="style-{{ block.id }}" value="bohemian" required>
              <span data-block="{{ block.id }}">Bohemian</span>
            </label>
          </div>
        </div>
        
        <!-- Step 3: Budget -->
        <div class="editmuse-concierge-step" data-step="2" style="display: none;">
          <h2 class="editmuse-concierge-step-title">What's your budget?</h2>
          <div class="editmuse-concierge-options">
            <label class="editmuse-concierge-radio-label">
              <input type="radio" name="budget-{{ block.id }}" value="under-100" required>
              <span data-block="{{ block.id }}">Under $100</span>
            </label>
            <label class="editmuse-concierge-radio-label">
              <input type="radio" name="budget-{{ block.id }}" value="100-250" required>
              <span data-block="{{ block.id }}">$100 - $250</span>
            </label>
            <label class="editmuse-concierge-radio-label">
              <input type="radio" name="budget-{{ block.id }}" value="250-500" required>
              <span data-block="{{ block.id }}">$250 - $500</span>
            </label>
            <label class="editmuse-concierge-radio-label">
              <input type="radio" name="budget-{{ block.id }}" value="over-500" required>
              <span data-block="{{ block.id }}">Over $500</span>
            </label>
          </div>
        </div>
        
        <!-- Results Placeholder -->
        <div class="editmuse-concierge-step" data-step="3" style="display: none;">
          <h2 class="editmuse-concierge-step-title">Your Recommendations</h2>
          <div class="editmuse-concierge-results">
            <p class="editmuse-concierge-results-placeholder">Recommended products will appear here</p>
          </div>
        </div>
      </div>
      
      <div class="editmuse-concierge-navigation">
        <button type="button" class="editmuse-concierge-nav-btn editmuse-concierge-back" style="display: none;">Back</button>
        <button type="button" class="editmuse-concierge-nav-btn editmuse-concierge-next">Next</button>
        <button type="button" class="editmuse-concierge-nav-btn editmuse-concierge-submit" data-block="{{ block.id }}" style="display: none;">Get Recommendations</button>
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "EditMuse Concierge",
  "target": "section",
  "stylesheet": "editmuse-concierge.css",
  "javascript": "editmuse-concierge.js",
  "settings": [
    {
      "type": "text",
      "id": "button_label",
      "label": "Button Label",
      "default": "Start Style Quiz"
    },
    {
      "type": "color",
      "id": "accent_color",
      "label": "Accent Color",
      "default": "#1a1a1a"
    }
  ]
}
{% endschema %}
