{{ 'editmuse-concierge.css' | asset_url | stylesheet_tag }}

<div class="editmuse-launcher" 
     data-editmuse-launcher="true"
     data-result-url="{{ block.settings.result_url | default: '/pages/editmuse-results' }}"
     data-result-count="{{ block.settings.result_count | default: '8' }}">
  <button type="button" class="editmuse-launcher-button" data-editmuse-launcher-btn>
    {{ block.settings.button_text | default: "Ask EditMuse" }}
  </button>
  <div class="editmuse-launcher-error" data-editmuse-launcher-error style="display: none;"></div>
  
  <!-- Modal for quiz -->
  <div class="editmuse-concierge-modal" id="editmuse-launcher-modal-{{ block.id }}" style="display: none;">
    <div class="editmuse-concierge-modal-overlay"></div>
    <div class="editmuse-concierge-modal-content">
      <button type="button" class="editmuse-concierge-modal-close" aria-label="Close">&times;</button>
      
      <div class="editmuse-concierge-steps">
        <!-- Step 1: Question from server -->
        <div class="editmuse-concierge-step" data-step="0">
          <h2 class="editmuse-concierge-step-title" data-editmuse-question-title>What are you looking for?</h2>
          <div class="editmuse-concierge-input-wrapper">
            <input type="text" 
                   class="editmuse-concierge-input" 
                   data-editmuse-launcher-input
                   placeholder="Describe what you need..."
                   required>
          </div>
          <div class="editmuse-concierge-error" data-editmuse-launcher-modal-error style="display: none;"></div>
        </div>
      </div>
      
      <div class="editmuse-concierge-navigation">
        <button type="button" class="editmuse-concierge-nav-btn editmuse-concierge-next" data-editmuse-launcher-next>
          Next
        </button>
      </div>
    </div>
  </div>
</div>

{{ 'editmuse-concierge.js' | asset_url | script_tag }}

{% schema %}
{
  "name": "EditMuse Launcher",
  "target": "section",
  "settings": [
    {
      "type": "text",
      "id": "button_text",
      "label": "Button Text",
      "default": "Ask EditMuse"
    },
    {
      "type": "text",
      "id": "result_url",
      "label": "Results Page URL",
      "default": "/pages/editmuse-results",
      "info": "URL to redirect to after starting session"
    },
    {
      "type": "number",
      "id": "result_count",
      "label": "Result Count",
      "default": 8,
      "info": "Number of recommendations to return (8, 12, or 16)"
    }
  ]
}
{% endschema %}

